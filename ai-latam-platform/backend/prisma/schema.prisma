// Prisma Schema for AI Latam Platform
// 数据库: Supabase PostgreSQL

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

// ==================== Tools 表 ====================
// 字段说明:
// - id: 主键，自增
// - name: 工具名称，必填
// - tag: 标签，必填（如 "AI工具", "效率工具"）
// - category: 分类，可选（如 "图像生成", "文本写作"）
// - description: 工具描述，可选
// - price: 价格信息，可选（如 "免费", "$9.99/月"）
// - url: 工具链接，可选
// - affiliate_link: 联盟链接，可选
// - logo_url: Logo 图片 URL，可选
// - image_url: 展示图片 URL，可选
// - is_featured: 是否为推荐工具，默认 false
// - created_at: 创建时间，默认当前时间

model Tool {
  id             Int      @id @default(autoincrement())
  name           String   @unique
  tag            String
  category       String?
  description    String?
  price          String?
  url            String?
  affiliateLink  String?  @map("affiliate_link")
  logoUrl        String?  @map("logo_url")
  imageUrl       String?  @map("image_url")
  gallery        Json?    @map("gallery")
  isFeatured     Boolean  @default(false) @map("is_featured")
  createdAt      DateTime @default(now()) @map("created_at")

  @@index([tag])
  @@index([category])
  @@index([isFeatured])
  @@index([createdAt])
  @@map("tools")
}

// ==================== Prompts 表 ====================
// 字段说明:
// - id: 主键，自增
// - title: 提示词标题，必填
// - category: 分类，必填（如 "写作", "编程"）
// - platforms: 支持的平台列表，必填（JSON 数组）
// - preview: 预览文本，可选
// - prompt: 完整提示词内容，必填
// - created_at: 创建时间，默认当前时间

model Prompt {
  id         Int      @id @default(autoincrement())
  title      String   @unique
  category   String
  platforms  Json     // 存储 ["ChatGPT", "Claude", "Midjourney"]
  preview    String?
  prompt     String   @db.Text
  coverImage String?  @map("cover_image")
  createdAt  DateTime @default(now()) @map("created_at")

  @@index([category])
  @@index([createdAt])
  @@map("prompts")
}

// ==================== Posts 表 ====================
// 字段说明:
// - id: 主键，自增
// - title: 文章标题，必填
// - excerpt: 摘要，可选
// - tag: 标签，可选（如 "深度测评", "提示词拆解"）
// - readTime: 阅读时间，可选（如 "5 Min Read"）
// - publishedAt: 发布日期，必填
// - content: 文章内容，可选（长文本）
// - createdAt: 创建时间，默认当前时间

model Post {
  id           Int      @id @default(autoincrement())
  title        String
  excerpt      String?
  tag          String?
  readTime     String?  @map("read_time")
  publishedAt  DateTime @default(now()) @map("published_at")
  content      String?  @db.Text
  coverImage   String?  @map("cover_image")
  gallery      Json?    @map("gallery")
  createdAt    DateTime @default(now()) @map("created_at")

  @@index([tag])
  @@index([publishedAt])
  @@index([createdAt])
  @@map("posts")
}
